(this["webpackJsonp3d-snake"]=this["webpackJsonp3d-snake"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(4),a=n(7),i=n.n(a),o=n(11),r=n.n(o),c=(n(17),n(0)),h=n(3),d=n(5),l=n(1),u=n(2),p=(n(18),n(6)),b=(n(19),2*window.innerWidth/3),j=window.innerHeight,m={"+x":new p.j(1,0,0),"-x":new p.j(-1,0,0),"+y":new p.j(0,1,0),"-y":new p.j(0,-1,0),"+z":new p.j(0,0,1),"-z":new p.j(0,0,-1)},g=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).initiate.bind(Object(d.a)(s)),s.reset.bind(Object(d.a)(s)),s.changeScore.bind(Object(d.a)(s)),s.turn.bind(Object(d.a)(s)),s.hashPosition.bind(Object(d.a)(s)),s.getRandomBetween.bind(Object(d.a)(s)),s.moveFoodRandom.bind(Object(d.a)(s)),s.createFood.bind(Object(d.a)(s)),s.createSnakeBody.bind(Object(d.a)(s)),s.moveSnakeBody.bind(Object(d.a)(s)),s.createBounds.bind(Object(d.a)(s)),s.changeBounds.bind(Object(d.a)(s)),s.gameOver.bind(Object(d.a)(s)),s.startAnimation.bind(Object(d.a)(s)),s.stopAnimation.bind(Object(d.a)(s)),s.handleKeyDown.bind(Object(d.a)(s)),s.initiate(),s}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.mount.appendChild(this.renderer.domElement),this.renderer.render(this.scene,this.camera),document.addEventListener("keydown",this.handleKeyDown.bind(this))}},{key:"componentDidUpdate",value:function(){"bounds"===this.props.change?(this.changeBounds(this.props.boundsSize),this.renderer.render(this.scene,this.camera)):"start"===this.props.change?(console.log(this.snake),this.startAnimation()):"stop"===this.props.change?this.stopAnimation():"reset"===this.props.change?(this.reset(),this.renderer.render(this.scene,this.camera)):"gameover"===this.props.change&&this.stopAnimation()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown.bind(this))}},{key:"initiate",value:function(){this.animation=void 0,this.camera=new p.g(75,b/j,.1,1e3),this.scene=new p.i,this.renderer=new p.k({antialias:!0,alpha:!0}),this.renderer.setSize(b,j),this.renderer.setClearColor(0,0),this.boundsMaterial=new p.f({color:16711680,transparent:!0,opacity:.15}),this.bounds=this.createBounds(),this.scene.add(this.bounds),this.snake=[],this.snakeGeometry=new p.a(1,1,1),this.snakeMaterial=new p.f({color:65280}),this.foodGeometry=new p.a(1,1,1),this.foodMaterial=new p.f({color:16711680}),this.light=new p.h(16777215,1,0),this.light.position.set(30,30,30),this.scene.add(this.light),this.camera.position.set(.8*this.props.boundsSize,.8*this.props.boundsSize,this.props.boundsSize),this.camera.lookAt(new p.j(0,0,0)),this.reset()}},{key:"reset",value:function(){for(this.changeScore(0),this.grid={},this.current=new p.j(0,0,0),this.dir="+z",this.food&&this.scene.remove(this.food);this.snake.length>0;)this.scene.remove(this.snake.pop());this.createSnakeBody(0,0,0);var e=this.createFood(0,0,0);this.scene.add(e),this.food=this.moveFoodRandom(e)}},{key:"createFood",value:function(e,t,n){var s=new p.c,a=new p.e(this.foodGeometry,this.foodMaterial),i=new p.b(a.geometry),o=new p.d(i);return o.material.depthTest=!1,o.material.opacity=.25,o.material.transparent=!0,s.add(a),s.add(o),s.position.set(e,t,n),s}},{key:"hashPosition",value:function(e){var t=e.getComponent(0),n=e.getComponent(1),s=e.getComponent(2);function a(e,t){return(e+t)*(e+t+1)/2+t}return s=s>=0?2*s:2*-s-1,a(a(t=t>=0?2*t:2*-t-1,n=n>=0?2*n:2*-n-1),s)}},{key:"getRandomBetween",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"moveFoodRandom",value:function(e){this.grid[this.hashPosition(e.position)]="empty";for(var t=Math.ceil(-this.props.boundsSize/2),n=Math.floor(this.props.boundsSize/2),s=[],a=t;a<=n;a++)for(var i=t;i<=n;i++)for(var o=t;o<=n;o++){var r=new p.j(a,i,o);"snake"!==this.grid[this.hashPosition(r)]&&"food"!==this.grid[this.hashPosition(r)]&&s.push(r)}var c=s[this.getRandomBetween(0,s.length)];return e.position.set(c.getComponent(0),c.getComponent(1),c.getComponent(2)),this.grid[this.hashPosition(c)]="food",e}},{key:"createSnakeBody",value:function(e,t,n){var s=new p.c,a=new p.e(this.snakeGeometry,this.snakeMaterial),i=new p.b(a.geometry),o=new p.d(i);return o.material.depthTest=!1,o.material.opacity=.25,o.material.transparent=!0,s.add(a),s.add(o),s.position.set(e,t,n),this.snake.push(s),this.grid[this.hashPosition(s.position)]="snake",this.scene.add(s),s}},{key:"moveSnakeBody",value:function(e,t,n,s){var a=e.position;return this.grid[this.hashPosition(a)]="empty","snake"===this.grid[this.hashPosition(new p.j(t,n,s))]?void this.gameOver("Hit itself"):(this.snake.splice(this.snake.indexOf(e),1),e.position.set(t,n,s),this.grid[this.hashPosition(e.position)]="snake",this.snake.push(e),e)}},{key:"createBounds",value:function(){var e=new p.c,t=new p.a(this.props.boundsSize,this.props.boundsSize,this.props.boundsSize,this.props.boundsSize/5,this.props.boundsSize/5,this.props.boundsSize/5),n=new p.e(t,this.boundsMaterial),s=new p.b(n.geometry),a=new p.d(s);return a.material.depthTest=!1,a.material.opacity=.25,a.material.transparent=!0,e.add(n),e.add(a),e}},{key:"changeBounds",value:function(e){this.scene.remove(this.bounds),this.bounds=this.createBounds(),this.scene.add(this.bounds),this.reset(),this.camera.position.set(.8*e,.8*e,e)}},{key:"changeScore",value:function(e){this.score=e,this.props.onScoreChange(this.score)}},{key:"turn",value:function(){this.current.add(m[this.dir]),Math.abs(this.current.getComponent(0))>=this.props.boundsSize/2||Math.abs(this.current.getComponent(1))>=this.props.boundsSize/2||Math.abs(this.current.getComponent(2))>=this.props.boundsSize/2?(console.log(this.current,this.props.boundsSize),this.gameOver("Out of bounds")):"food"===this.grid[this.hashPosition(this.current)]?(this.changeScore(this.score+1),this.moveFoodRandom(this.food),this.createSnakeBody(this.current.getComponent(0),this.current.getComponent(1),this.current.getComponent(2)),this.renderer.render(this.scene,this.camera)):(this.moveSnakeBody(this.snake[0],this.current.getComponent(0),this.current.getComponent(1),this.current.getComponent(2)),this.renderer.render(this.scene,this.camera))}},{key:"gameOver",value:function(e){this.props.onGameOver(e)}},{key:"startAnimation",value:function(){var e=this;this.animation=requestAnimationFrame((function t(){setTimeout((function(){"started"===e.props.gameState&&(e.animation=requestAnimationFrame(t),e.turn())}),1e3/1.5)}))}},{key:"stopAnimation",value:function(){}},{key:"handleKeyDown",value:function(e){if(e.preventDefault(),32===e.keyCode)this.props.onSpaceBar();else{if("started"!==this.props.gameState)return;switch(console.log("pass"),e.keyCode){case 37:this.dir="-x";break;case 38:this.dir="-z";break;case 39:this.dir="+x";break;case 40:this.dir="+z";break;case 88:this.dir="-y";break;case 90:this.dir="+y"}}}},{key:"render",value:function(){var e=this;return Object(s.jsx)("div",{className:"Game",children:Object(s.jsx)("div",{className:"Gameboard",ref:function(t){return e.mount=t},onKeyDown:this.handleKeyDown})})}}]),n}(i.a.Component),O=(n(20),n.p+"static/media/controls.acff3c6d.svg"),v=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"Instructions",children:[Object(s.jsx)("div",{className:"Instructions-Header",children:"Instructions"}),Object(s.jsxs)("ol",{children:[Object(s.jsx)("li",{children:"Choose the size."}),Object(s.jsx)("li",{children:'Click "Start" or use the space bar to begin playing.'}),Object(s.jsx)("li",{children:"Have fun :)"})]})]})}}]),n}(i.a.Component),k=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).handleChange=s.handleChange.bind(Object(d.a)(s)),s}return Object(h.a)(n,[{key:"handleChange",value:function(e){"initial"===this.props.gameState&&this.props.onBoundsSizeChange(e.target.value)}},{key:"render",value:function(){return Object(s.jsxs)("label",{className:"bounds-size-label",children:["Size:",Object(s.jsxs)("select",{className:"bounds-size-select",value:this.props.value,onChange:this.handleChange,children:[Object(s.jsx)("option",{value:"7",children:"Small"}),Object(s.jsx)("option",{value:"15",children:"Medium"}),Object(s.jsx)("option",{value:"25",children:"Large"})]})]})}}]),n}(i.a.Component),S=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).handleClick=s.handleClick.bind(Object(d.a)(s)),s}return Object(h.a)(n,[{key:"handleClick",value:function(e){this.props.onStartClick()}},{key:"render",value:function(){return Object(s.jsx)("a",{className:"start-button",children:Object(s.jsx)("button",{onClick:this.handleClick,children:"Start"})})}}]),n}(i.a.Component),f=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).handleClick=s.handleClick.bind(Object(d.a)(s)),s}return Object(h.a)(n,[{key:"handleClick",value:function(e){this.props.onStopClick()}},{key:"render",value:function(){return Object(s.jsx)("a",{className:"start-button",children:Object(s.jsx)("button",{onClick:this.handleClick,children:"Stop"})})}}]),n}(i.a.Component),C=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).handleClick=s.handleClick.bind(Object(d.a)(s)),s}return Object(h.a)(n,[{key:"handleClick",value:function(e){this.props.onResetClick()}},{key:"render",value:function(){return Object(s.jsx)("a",{className:"reset-button",children:Object(s.jsx)("button",{onClick:this.handleClick,children:"Reset"})})}}]),n}(i.a.Component),y=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"Controls",children:[Object(s.jsx)("div",{children:"Controls"}),Object(s.jsx)("img",{src:O,alt:"Controls",width:"200px",height:"200px"})]})}}]),n}(i.a.Component),x=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"ToDo",children:["To Do:",Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:"Better 3D depth or grid?"}),Object(s.jsx)("li",{children:"First person mode"}),Object(s.jsx)("li",{children:"Leaderboard"}),Object(s.jsx)("li",{children:"Pathfinding AI"})]})]})}}]),n}(i.a.Component),w=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"Settings",children:[Object(s.jsx)(v,{}),Object(s.jsx)(k,{value:this.props.boundsSize,gameState:this.props.gameState,onBoundsSizeChange:this.props.onBoundsSizeChange}),Object(s.jsxs)("div",{className:"SettingsButtons",children:[Object(s.jsx)(S,{onStartClick:this.props.onStartClick}),Object(s.jsx)(f,{onStopClick:this.props.onStopClick}),Object(s.jsx)(C,{onResetClick:this.props.onResetClick})]}),Object(s.jsx)(y,{}),Object(s.jsx)(x,{})]})}}]),n}(i.a.Component),z=(n(21),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"Scoreboard",children:["Score: ",this.props.score]})}}]),n}(i.a.Component)),B=(n(22),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"Message-Container",children:Object(s.jsx)("div",{className:"Message",id:this.props.gameState,children:this.props.message})})}}]),n}(i.a.Component)),N=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={change:null,gameState:"initial",message:"Press space to start",boundsSize:7,score:0},s.handleBoundsSizeChange=s.handleBoundsSizeChange.bind(Object(d.a)(s)),s.handleScoreChange=s.handleScoreChange.bind(Object(d.a)(s)),s.handleStartClick=s.handleStartClick.bind(Object(d.a)(s)),s.handleStopClick=s.handleStopClick.bind(Object(d.a)(s)),s.handleSpaceBar=s.handleSpaceBar.bind(Object(d.a)(s)),s.handleResetClick=s.handleResetClick.bind(Object(d.a)(s)),s.handleGameOver=s.handleGameOver.bind(Object(d.a)(s)),s}return Object(h.a)(n,[{key:"handleBoundsSizeChange",value:function(e){"initial"===this.state.gameState&&this.setState({change:"bounds",boundsSize:e})}},{key:"handleStartClick",value:function(){console.log(this.state.gameState),"initial"!==this.state.gameState&&"stopped"!==this.state.gameState||this.setState({change:"start",gameState:"started",message:""})}},{key:"handleStopClick",value:function(){"started"===this.state.gameState&&this.setState({change:"stop",gameState:"stopped",message:"Paused: Press space to start"})}},{key:"handleSpaceBar",value:function(){"initial"===this.state.gameState||"stopped"===this.state.gameState?this.setState({change:"start",gameState:"started",message:""}):"started"===this.state.gameState&&this.setState({change:"stop",gameState:"stopped",message:"Paused: Press space to start"})}},{key:"handleResetClick",value:function(){this.setState({change:"reset",gameState:"initial",message:"Press space to start"})}},{key:"handleScoreChange",value:function(e){this.setState({change:"score",score:e})}},{key:"handleGameOver",value:function(e){this.setState({change:"gameover",gameState:"gameover",message:"Game Over: ".concat(e)})}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)("div",{className:"App-Game",children:Object(s.jsx)(g,{change:this.state.change,boundsSize:this.state.boundsSize,gameState:this.state.gameState,onSpaceBar:this.handleSpaceBar,onScoreChange:this.handleScoreChange,onGameOver:this.handleGameOver})}),Object(s.jsx)("div",{className:"App-Settings",children:Object(s.jsx)(w,{gameState:this.state.gameState,boundsSize:this.state.boundsSize,onBoundsSizeChange:this.handleBoundsSizeChange,onStartClick:this.handleStartClick,onStopClick:this.handleStopClick,onResetClick:this.handleResetClick})}),Object(s.jsx)("div",{className:"App-Scoreboard",children:Object(s.jsx)(z,{score:this.state.score})}),Object(s.jsx)("div",{className:"App-Message",children:Object(s.jsx)(B,{gameState:this.state.gameState,message:this.state.message})})]})}}]),n}(i.a.Component),P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),s(e),a(e),i(e),o(e)}))};r.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(N,{})}),document.getElementById("root")),P()}],[[23,1,2]]]);
//# sourceMappingURL=main.2a4418d9.chunk.js.map